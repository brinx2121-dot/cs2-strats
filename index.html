<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PISTOL.GG — CS2 Strategy Hub</title>
  <meta name="description" content="CS2 pro pistol, rifle, force buy & anti-eco strategies with win rates.">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Share+Tech+Mono&family=Barlow+Condensed:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>
:root {
  --bg0:#080c14; --bg1:#0d1320; --bg2:#111928; --bg3:#172035;
  --ct:#00bfff; --ct-light:#00f0ff; --ct-glow:#00f0ff80;
  --t:#39ff14; --t-light:#7fff00; --t-glow:#39ff1480;
  --gold:#39ff14; --green:#39ff14; --cyan:#00f0ff;
  --text:#e0f7fa; --text-dim:#a0e0ff; --border:#004d40;
}

* {margin:0;padding:0;box-sizing:border-box;}
body {
  background:var(--bg0); background-size:cover; background-position:center;
  background-attachment:fixed; color:var(--text); font-family:'Barlow Condensed',sans-serif;
  min-height:100vh; overflow-x:hidden;
}
body::before {
  content:''; position:fixed; inset:0;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.08) 2px,rgba(0,0,0,0.08) 4px);
  pointer-events:none; z-index:9999;
}
header {
  position:sticky; top:0; z-index:100;
  background:rgba(8,12,20,0.95); backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border); padding:0 24px;
  display:flex; align-items:center; gap:32px; height:60px;
}
.logo {
  font-family:'Rajdhani',sans-serif; font-size:26px; font-weight:700;
  letter-spacing:4px; color:var(--gold);
  text-shadow:0 0 20px var(--cyan),0 0 40px var(--ct-glow);
}
.logo span {color:var(--cyan);}
.nav-tabs {display:flex; gap:4px; flex:1; overflow-x:auto; scrollbar-width:none;}
.nav-tabs::-webkit-scrollbar {display:none;}
.nav-tab {
  padding:8px 16px; background:transparent; border:1px solid var(--border);
  color:var(--text-dim); font-size:13px; font-weight:700; letter-spacing:2px;
  text-transform:uppercase; cursor:pointer; transition:all .2s;
}
.nav-tab.active {color:var(--gold); border-color:var(--gold); background:rgba(57,255,20,.08); box-shadow:0 0 15px var(--ct-glow);}
main {max-width:1400px; margin:0 auto; padding:24px 20px;}
.page {display:none;}
.page.active {display:block;}
/* minimal fallback style */
.fallback {padding:40px; text-align:center; color:#ff3366; font-size:18px;}
</style>
</head>
<body data-bg="images/aadasdas.png">

<header>
  <div class="logo">PISTOL<span>.</span>GG</div>
  <nav class="nav-tabs" id="navTabs"></nav>
</header>

<main id="mainContent">
  <!-- content will be injected here -->
</main>

<script defer>
const DATA = {
  // ← Paste your FULL DATA object here (PISTOL, FORCE, HALF BUY, RIFLE, ANTI ECO, ROLES, NEW_STRATS)
  // If DATA is missing or broken → page shows fallback message
  PISTOL: {}, FORCE: {}, /* ... etc ... */
};

const MAPS = ["ANUBIS","ANCIENT","DUST2","INFERNO","MIRAGE","NUKE","OVERPASS"];
const TABS = [
  {id:"roles", label:"ROLES"},
  {id:"pistol", label:"PISTOL"},
  {id:"force", label:"FORCE BUY"},
  {id:"halfbuy", label:"HALF BUY"},
  {id:"rifle", label:"RIFLE"},
  {id:"antieco", label:"ANTI ECO"}
];

const tabBGs = {
  roles:"images/telige.png",
  pistol:"images/mad mike.jpg",
  force:"images/ban.png",
  halfbuy:"images/Dogbeard.png",
  rifle:"images/CROSS.png",
  antieco:"images/STIMPACK.png"
};

// Lazy background
const bgObserver = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      document.body.style.backgroundImage = `url('${entry.target.dataset.bg}')`;
      bgObserver.unobserve(entry.target);
    }
  });
}, {rootMargin:"200px"});

function switchTab(id) {
  document.body.dataset.bg = tabBGs[id] || "images/OO.jpg";
  bgObserver.observe(document.body);

  document.querySelectorAll(".nav-tab").forEach(b => b.classList.toggle("active", b.dataset.tab === id));
  document.querySelectorAll(".page").forEach(p => p.classList.toggle("active", p.id === `page-${id}`));
  window.scrollTo(0,0);
}

function init() {
  const nav = document.getElementById("navTabs");
  const main = document.getElementById("mainContent");

  if (!nav || !main) {
    main.innerHTML = '<div class="fallback">Critical DOM error – check console (F12)</div>';
    return;
  }

  TABS.forEach((tab, i) => {
    const btn = document.createElement("button");
    btn.className = "nav-tab" + (i===0 ? " active" : "");
    btn.textContent = tab.label;
    btn.dataset.tab = tab.id;
    btn.setAttribute("role", "tab");
    btn.onclick = () => switchTab(tab.id);
    nav.appendChild(btn);

    const page = document.createElement("div");
    page.className = "page" + (i===0 ? " active" : "");
    page.id = `page-${tab.id}`;

    try {
      if (tab.id === "roles") {
        page.innerHTML = `<div class="fallback">Roles page loading...</div>`;
        // add your renderRolesPage() logic here when ready
      } else {
        page.innerHTML = `<div class="fallback">${tab.label} loading...</div>`;
        // add your renderStratPage(tab.id, tab.label) logic here
      }
    } catch (e) {
      page.innerHTML = `<div class="fallback">Error loading ${tab.label}: ${e.message}</div>`;
      console.error(e);
    }

    main.appendChild(page);
  });

  // Initial background
  bgObserver.observe(document.body);
}

// Start everything
try {
  init();
} catch (e) {
  document.getElementById("mainContent").innerHTML = 
    `<div class="fallback">JavaScript crashed: ${e.message}<br>Open console (F12) for details.</div>`;
  console.error("Init failed:", e);
}
</script>
</body>
</html>
